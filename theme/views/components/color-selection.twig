{#
    Color Selection Component
    
    Custom checkbox-style color selection for product variations
#}

<div class="color-selection" 
     x-data="colorSelection()" 
     data-colors="{{ colors|json_encode|e('html_attr') }}">
    <label class="block text-sm font-medium text-gray-700 mb-3">
        Colour
    </label>
    
    <div class="flex flex-wrap gap-4">
        <template x-for="color in colorOptions" :key="color.value">
            <div class="color-option">
                <label class="cursor-pointer flex items-center space-x-2" :class="{ 'cursor-not-allowed opacity-50': !color.available }">
                    <!-- Custom Radio Button (Circle) -->
                    <div class="relative">
                        <input type="radio" 
                               name="color_selection"
                               :value="color.value" 
                               :checked="selectedColor === color.value"
                               @click="selectColor(color)"
                               :disabled="!color.available"
                               class="sr-only outline-none focus:outline-none">
                        
                        <div :class="{
                            'bg-white border-black': selectedColor === color.value,
                            'bg-white border-gray-300': selectedColor !== color.value
                        }" 
                        class="w-5 h-5 border-2 rounded-full flex items-center justify-center outline-none focus:outline-none transition-all duration-200">
                            <!-- Radio dot -->
                            <div x-show="selectedColor === color.value" 
                                 class="bg-black w-3 h-3 rounded-full"></div>
                        </div>
                    </div>
                    
                    <!-- Color Name -->
                    <div>
                        <div class="text-sm font-medium text-gray-900" x-text="color.name"></div>
                        <div x-show="!color.available" class="text-xs text-gray-500">Out of Stock</div>
                    </div>
                </label>
            </div>
        </template>
    </div>
    
    <!-- No colors message -->
    <div x-show="colorOptions.length === 0" class="text-gray-500 text-sm py-4">
        No color options available
    </div>
    
    <!-- Hidden input for form submission -->
    <input type="hidden" 
           name="attribute_colour" 
           :value="selectedColor || ''" 
           x-ref="colorInput">
</div>
