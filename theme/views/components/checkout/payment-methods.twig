{# Payment Methods Component
   Props: wc_checkout
#}

<div class="payment-methods-section mb-6">
    <h4 class="font-medium text-gray-900 mb-4">Payment</h4>
    
    {{ function('do_action', 'woocommerce_review_order_before_payment')|raw }}
    
    {% set available_gateways = function('WC').payment_gateways.get_available_payment_gateways() %}
    
    {% if available_gateways %}
        <div class="payment-methods space-y-3">
            {% for gateway_id, gateway in available_gateways %}
                {% if gateway.enabled == 'yes' %}
                    <div class="payment-method-option">
                        <input type="radio"
                               id="payment_method_{{ gateway_id }}"
                               class="payment_method"
                               name="payment_method"
                               value="{{ gateway_id }}"
                               style="position: absolute; opacity: 0;"
                               {{ loop.first ? 'checked' : '' }} />
                        
                        <label for="payment_method_{{ gateway_id }}" class="payment-method-label flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-300 transition-all duration-200">
                            <div class="radio-button flex-shrink-0 w-5 h-5 border-2 border-gray-300 rounded-full mr-3 relative transition-all duration-200">
                                <div class="radio-inner absolute inset-1 bg-black rounded-full scale-0 transition-transform duration-200"></div>
                            </div>
                            
                            <div class="payment-details flex-1">
                                <div class="payment-title font-medium text-gray-900">
                                    {{ gateway.get_title()|raw }}
                                </div>
                                {% if gateway.has_fields() or gateway.get_description() %}
                                    <div class="payment-description text-sm text-gray-600 mt-1">
                                        {{ gateway.get_description()|raw }}
                                    </div>
                                {% endif %}
                            </div>
                        </label>
                        
                        <!-- Payment Fields (for methods like credit card) -->
                        {% if gateway.has_fields() %}
                            <div class="payment-box mt-3 p-4 bg-gray-50 rounded-lg" style="display: {{ loop.first ? 'block' : 'none' }};">
                                {% if gateway_id == 'stripe' or gateway_id == 'square' or 'card' in gateway_id %}
                                    <!-- Credit Card Fields -->
                                    <div class="card-fields">
                                        <div class="form-row mb-4">
                                            <label for="card_number" class="block text-sm font-medium text-gray-700 mb-1">
                                                Card Number
                                            </label>
                                            <input type="text" 
                                                   id="card_number" 
                                                   name="card_number"
                                                   class="w-full px-3 py-3 border border-gray-300 rounded-md" 
                                                   placeholder="1234 5678 9123 1111" />
                                        </div>
                                        
                                        <div class="grid grid-cols-2 gap-4">
                                            <div class="form-row">
                                                <label for="card_expiry" class="block text-sm font-medium text-gray-700 mb-1">
                                                    Expiration Date
                                                </label>
                                                <input type="text" 
                                                       id="card_expiry" 
                                                       name="card_expiry"
                                                       class="w-full px-3 py-3 border border-gray-300 rounded-md " 
                                                       placeholder="MM / YY" />
                                            </div>
                                            
                                            <div class="form-row">
                                                <label for="card_cvc" class="block text-sm font-medium text-gray-700 mb-1">
                                                    Security Code
                                                </label>
                                                <input type="text" 
                                                       id="card_cvc" 
                                                       name="card_cvc"
                                                       class="w-full px-3 py-3 border border-gray-300 rounded-md" 
                                                       placeholder="CVC" />
                                            </div>
                                        </div>
                                        
                                        <div class="accepted-cards mt-4">
                                            <p class="text-xs text-gray-500">Credit cards accepted: Visa, Mastercard</p>
                                            <div class="card-icons flex gap-2 mt-2">
                                                <span class="inline-block w-8 h-5 bg-gray-200 rounded text-xs text-center leading-5">VISA</span>
                                                <span class="inline-block w-8 h-5 bg-gray-200 rounded text-xs text-center leading-5">MC</span>
                                            </div>
                                        </div>
                                    </div>
                                {% elseif gateway_id == 'bacs' %}
                                    <!-- Direct Bank Transfer -->
                                    <div class="bank-transfer-info text-sm text-gray-600">
                                        {{ gateway.get_description()|raw }}
                                    </div>
                                {% else %}
                                    <!-- Other payment methods -->
                                    {{ gateway.payment_fields()|raw }}
                                {% endif %}
                            </div>
                        {% endif %}
                    </div>
                {% endif %}
            {% endfor %}
        </div>
    {% else %}
        <div class="no-payment-methods">
            <p class="text-gray-600">Sorry, it seems that there are no available payment methods for your location. Please contact us if you require assistance or wish to make alternate arrangements.</p>
        </div>
    {% endif %}

    {{ function('do_action', 'woocommerce_review_order_after_payment')|raw }}
</div>