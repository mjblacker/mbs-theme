{% extends "base.twig" %}

{% block content %}
    <div class="woocommerce-cart mb-10">
        <!-- Breadcrumbs -->
        {% include 'woocommerce/breadcrumbs.twig' %}

        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 overflow-x-hidden">
            <!-- Check if WooCommerce cart is available -->
            {% if function('WC') and function('WC').cart %}
                {% set wc_cart = function('WC').cart %}
                
                {# Calculate cart totals and shipping if needed #}
                {% do function('WC').cart.calculate_totals() %}
                {# Calculate shipping packages #}
                {% do function('WC').shipping.calculate_shipping(function('WC').cart.get_shipping_packages()) %}
                
                <!-- Main Cart Layout -->
                <div class="grid grid-cols-1 lg:grid-cols-12 gap-4 lg:gap-8">
                    <!-- Cart Content -->
                    <div class="lg:col-span-7" x-data="cartPage">
                        {% include 'components/cart/cart-content.twig' with { wc_cart: wc_cart } %}
                    </div>

                    <!-- Cart Totals -->
                    <div class="lg:col-span-5 woocommerce-cart-form__contents">
                        {% include 'components/cart/cart-totals.twig' with { wc_cart: wc_cart } %}
                    </div>
                </div>

            {% else %}
                <div class="text-center py-12">
                    <p class="text-gray-600 text-lg">WooCommerce is not available.</p>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}