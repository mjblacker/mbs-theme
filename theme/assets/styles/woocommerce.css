/* WooCommerce Styles - Using CSS Nesting */
.woocommerce {
  @apply text-gray-900;

  /* Price styling */
  .price {
    @apply text-xl font-bold;

    del {
      @apply text-gray-500 opacity-75;
    }

    ins {
      @apply text-green-600 no-underline;
    }
  }

  /* Star ratings */
  .star-rating {
    @apply text-yellow-400;
  }

  /* Product tabs */
  .woocommerce-tabs {
    ul.tabs {
      @apply flex border-b border-gray-200 mb-6;

      li {
        @apply mr-6;

        a {
          @apply block px-4 py-3 text-gray-600 hover:text-gray-900 border-b-2 border-transparent hover:border-blue-500 no-underline;
        }

        &.active a {
          @apply text-blue-600 border-blue-600;
        }
      }
    }

    .panel {
      @apply prose max-w-none;
    }
  }

  /* Forms */
  form {
    .form-row {
      @apply mb-4;

      label {
        @apply block text-sm font-medium text-gray-700 mb-1;
      }
    }

    input[type="text"],
    input[type="email"],
    input[type="number"],
    input[type="password"],
    select,
    textarea {
      @apply w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500;
    }
  }

  /* Messages */
  .woocommerce-message {
    @apply bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded mb-4;
  }

  .woocommerce-error {
    @apply bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded mb-4;
  }

  .woocommerce-info {
    @apply bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded mb-4;
  }

  /* Quantity input */
  .quantity input {
    @apply w-16 text-center;
  }

  /* Cart */
  .cart-collaterals {
    @apply mt-8;
  }

  /* Tables */
  table.shop_table {
    @apply w-full border-collapse;

    th,
    td {
      @apply border-b border-gray-200 px-4 py-3 text-left;
    }

    th {
      @apply bg-gray-50 font-semibold;
    }
  }

  /* Buttons */
  .button,
  button,
  input[type="submit"] {
    /* @apply hover:bg-yellow-500 text-black px-4 py-2 font-bold transition-colors inline-block no-underline;
    background-color: #fff200 !important;
    color: #000 !important;
    width: auto !important;
    display: inline-block !important;
    border: none !important;
    border-radius: 0 !important; */

    &:hover {
      /* background-color: #eab308 !important;
      color: #000 !important;
      text-decoration: none !important; */
      cursor: pointer;
    }

    &.alt {
      background-color: #fff200 !important;
      color: #000 !important;

      &:hover {
        background-color: #eab308 !important;
        color: #000 !important;
      }
    }
  }
}

/* Shipping Calculator Form Styling */
.shipping-calculator-form,
#shipping-calculator-form {
  margin-top: 1rem !important;
  padding: 1.5rem !important;
  background: white !important;
  border: 1px solid #d1d5db !important;
  border-radius: 0.5rem !important;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important;
}

/* When WooCommerce shows the form, ensure it's properly styled */
.shipping-calculator-form[style*="block"],
#shipping-calculator-form[style*="block"] {
  display: block !important;
}

/* Form fields styling */
.woocommerce-shipping-calculator #shipping-calculator-form .form-row,
.woocommerce-shipping-calculator #shipping-calculator-form p {
  margin-bottom: 1rem !important;
}

.woocommerce-shipping-calculator #shipping-calculator-form .form-row:last-child,
.woocommerce-shipping-calculator #shipping-calculator-form p:last-child {
  margin-bottom: 0 !important;
}

/* Labels */
.woocommerce-shipping-calculator #shipping-calculator-form label {
  display: block !important;
  margin-bottom: 0.5rem !important;
  font-size: 0.875rem !important;
  font-weight: 500 !important;
  color: #374151 !important;
}

.woocommerce-shipping-calculator #shipping-calculator-form label .required {
  color: #ef4444 !important;
  margin-left: 0.25rem !important;
}

/* Text inputs */
.woocommerce-shipping-calculator #shipping-calculator-form input[type="text"],
.woocommerce-shipping-calculator #shipping-calculator-form input.input-text {
  width: 100% !important;
  padding: 0.5rem 0.75rem !important;
  border: 1px solid #d1d5db !important;
  border-radius: 0.375rem !important;
  font-size: 0.875rem !important;
  line-height: 1.25rem !important;
  background: white !important;
  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out !important;
}

.woocommerce-shipping-calculator
  #shipping-calculator-form
  input[type="text"]:focus,
.woocommerce-shipping-calculator
  #shipping-calculator-form
  input.input-text:focus {
  outline: none !important;
  border-color: #3b82f6 !important;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
}

/* Select2 dropdowns */
.woocommerce-shipping-calculator #shipping-calculator-form .select2-container {
  width: 100% !important;
}

.woocommerce-shipping-calculator
  #shipping-calculator-form
  .select2-container
  .select2-selection {
  border: 1px solid #d1d5db !important;
  border-radius: 0.375rem !important;
  height: 38px !important;
  line-height: 36px !important;
}

.woocommerce-shipping-calculator
  #shipping-calculator-form
  .select2-container
  .select2-selection__rendered {
  padding: 0.5rem 0.75rem !important;
  line-height: 34px !important;
  color: #111827 !important;
}

.woocommerce-shipping-calculator
  #shipping-calculator-form
  .select2-container
  .select2-selection__arrow {
  right: 0.5rem !important;
  height: 36px !important;
}

.woocommerce-shipping-calculator
  #shipping-calculator-form
  .select2-container--open
  .select2-selection {
  border-color: #3b82f6 !important;
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1) !important;
}

/* Submit button */
.woocommerce-shipping-calculator #shipping-calculator-form .button,
.woocommerce-shipping-calculator
  #shipping-calculator-form
  button[type="submit"] {
  background: #fff200 !important;
  color: black !important;
  padding: 0.5rem 1.5rem !important;
  border: none !important;
  border-radius: 0.375rem !important;
  font-weight: 500 !important;
  cursor: pointer !important;
  transition: background-color 0.15s ease-in-out !important;
}

.woocommerce-shipping-calculator #shipping-calculator-form .button:hover,
.woocommerce-shipping-calculator
  #shipping-calculator-form
  button[type="submit"]:hover {
  background: #eab308 !important;
}

/* Standalone product styles (outside .woocommerce scope) */
.woocommerce-products .grid {
  column-gap: 2rem !important;
  row-gap: 4rem !important;
}

.product-item .space-y-2 > * + * {
  margin-top: 0.5rem;
}

/* Custom styles for range slider thumbs */
.range-slider-thumb::-webkit-slider-thumb {
  appearance: none;
  height: 20px;
  width: 20px;
  border-radius: 50%;
  background: #363738;
  cursor: pointer;
  border: 2px solid #fff;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  pointer-events: all;
  position: relative;
  z-index: 1;
}

.range-slider-thumb::-moz-range-thumb {
  height: 20px;
  width: 20px;
  border-radius: 50%;
  background: #363738;
  cursor: pointer;
  border: 2px solid #fff;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  pointer-events: all;
  position: relative;
  z-index: 1;
}

.range-slider-thumb::-webkit-slider-track {
  background: transparent;
}

.range-slider-thumb::-moz-range-track {
  background: transparent;
}

.range-slider-thumb:nth-of-type(2)::-webkit-slider-thumb {
  z-index: 2;
}

/* Custom Swiper Styles */
.main-image-swiper .swiper-button-next,
.main-image-swiper .swiper-button-prev {
  width: 40px;
  height: 40px;
  margin-top: -20px;
}

.main-image-swiper .swiper-button-next:after,
.main-image-swiper .swiper-button-prev:after {
  font-size: 16px;
}

.thumbnail-swiper {
  padding: 8px 0;
}

.thumbnail-swiper .swiper-slide {
  width: 80px;
  flex-shrink: 0;
}

.lightbox-swiper .swiper-button-next,
.lightbox-swiper .swiper-button-prev {
  color: white;
}

.lightbox-swiper .swiper-button-next:after,
.lightbox-swiper .swiper-button-prev:after {
  font-size: 24px;
}

/* Modern Shipping Options Styling */
.shipping-options-modern {
  @apply mb-6;

  .shipping-title {
    @apply text-lg font-medium text-gray-900 mb-4;
  }

  .shipping-methods-list {
    @apply space-y-3;
  }

  .shipping-method-option {
    @apply relative;
  }

  .shipping-method-label {
    @apply grid grid-cols-12 items-center p-1 rounded-lg cursor-pointer;

    &:hover {
      @apply border-gray-300;
    }
  }

  /* Radio button styling - works for adjacent siblings */
  .shipping_method:checked ~ .shipping-method-label .radio-button {
    @apply border-black;
  }

  .shipping_method:checked ~ .shipping-method-label .radio-inner {
    @apply scale-100;
  }

  /* Also handle cases where input is inside the label using :has() */
  .shipping-method-label:has(input.shipping_method:checked) .radio-button {
    @apply border-black;
  }

  .shipping-method-label:has(input.shipping_method:checked) .radio-inner {
    @apply scale-100;
  }

  .radio-button {
    @apply flex-shrink-0 w-5 h-5 border-2 border-gray-300 rounded-full relative transition-colors;
  }

  .radio-inner {
    @apply absolute inset-0.5 bg-black rounded-full scale-0 transition-transform duration-200;
  }

  .method-details {
    @apply flex-1;
  }

  .method-name {
    @apply font-medium text-gray-900;
  }

  .method-location {
    @apply text-sm text-gray-600 mt-1;
  }

  .method-price {
    @apply font-semibold text-gray-900 text-right;
  }

  /* Shipping calculator styling */
  .shipping-calculator-form,
  #shipping-calculator-form {
    @apply mt-4 p-6 bg-white rounded-lg border border-gray-200 shadow-sm;
    display: none !important; /* Hidden by default */

    &.open {
      display: block !important;
    }

    /* Form rows */
    .form-row,
    p {
      @apply mb-4;

      &:last-child {
        @apply mb-0;
      }

      /* Labels */
      label {
        @apply block text-sm font-medium text-gray-700 mb-2;

        .required {
          @apply text-red-500;
        }
      }

      /* Regular inputs */
      input[type="text"],
      input.input-text {
        @apply w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm;
      }

      /* Regular select elements (hidden by Select2) */
      select.select2-hidden-accessible {
        display: none !important;
      }
    }

    /* Select2 dropdown styling */
    .select2-container {
      @apply w-full;

      .select2-selection {
        @apply border border-gray-300 rounded-md text-sm;
        height: 38px !important;
        line-height: 36px !important;

        &:focus,
        &.select2-selection--single:focus {
          @apply ring-2 ring-blue-500 border-blue-500 outline-none;
        }

        .select2-selection__rendered {
          @apply px-3 py-2 text-gray-900;
          line-height: 34px !important;
        }

        .select2-selection__arrow {
          @apply right-2;
          height: 36px !important;
        }
      }

      &.select2-container--open {
        .select2-selection {
          @apply ring-2 ring-blue-500 border-blue-500;
        }
      }
    }

    /* Submit button */
    .button,
    button[type="submit"],
    input[type="submit"] {
      @apply bg-[#FFF200] hover:bg-yellow-500 text-black px-6 py-2 rounded font-medium transition-colors cursor-pointer border-0;

      &:hover {
        @apply bg-yellow-500;
      }
    }

    /* Hidden fields styling */
    input[type="hidden"] {
      display: none;
    }

    /* Address field specific styling */
    .address-field {
      @apply relative;

      .required {
        @apply text-red-500 ml-1;
      }
    }

    /* Validation styling */
    .validate-required {
      .input-text:invalid {
        @apply border-red-500 focus:border-red-500 focus:ring-red-500;
      }
    }
  }

  .shipping-calculator-button {
    @apply text-blue-600 hover:text-blue-700 text-sm font-medium cursor-pointer underline;
  }

  /* WooCommerce default shipping calculator overrides */
  .woocommerce-shipping-destination {
    a {
      @apply text-blue-600 hover:text-blue-700 no-underline;
    }
  }

  /* WooCommerce shipping calculator wrapper - force higher specificity */
  .woocommerce-shipping-calculator,
  form.woocommerce-shipping-calculator {
    @apply mt-4;

    h2 {
      @apply text-lg font-medium text-gray-900 mb-4;
    }

    .shipping-calculator-button {
      @apply text-blue-600 hover:text-blue-700 text-sm font-medium cursor-pointer underline;
    }

    /* Apply all the form styling to the inner form */
    .shipping-calculator-form,
    #shipping-calculator-form,
    section.shipping-calculator-form,
    section#shipping-calculator-form {
      @apply mt-4 p-6 bg-white rounded-lg border border-gray-200 shadow-sm;
      display: none !important; /* Hidden by default */

      &.open {
        display: block !important;
      }

      /* Form rows */
      .form-row,
      p {
        @apply mb-4;

        &:last-child {
          @apply mb-0;
        }

        /* Labels */
        label {
          @apply block text-sm font-medium text-gray-700 mb-2;

          .required {
            @apply text-red-500;
          }
        }

        /* Regular inputs */
        input[type="text"],
        input.input-text {
          @apply w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm;
        }

        /* Regular select elements (hidden by Select2) */
        select.select2-hidden-accessible {
          display: none !important;
        }
      }

      /* Select2 dropdown styling */
      .select2-container {
        @apply w-full;

        .select2-selection {
          @apply border border-gray-300 rounded-md text-sm;
          height: 38px !important;
          line-height: 36px !important;

          &:focus,
          &.select2-selection--single:focus {
            @apply ring-2 ring-blue-500 border-blue-500 outline-none;
          }

          .select2-selection__rendered {
            @apply px-3 py-2 text-gray-900;
            line-height: 34px !important;
          }

          .select2-selection__arrow {
            @apply right-2;
            height: 36px !important;
          }
        }

        &.select2-container--open {
          .select2-selection {
            @apply ring-2 ring-blue-500 border-blue-500;
          }
        }
      }

      /* Submit button */
      .button,
      button[type="submit"],
      input[type="submit"] {
        @apply bg-[#FFF200] hover:bg-yellow-500 text-black px-6 py-2 rounded font-medium transition-colors cursor-pointer border-0;

        &:hover {
          @apply bg-yellow-500;
        }
      }

      /* Hidden fields styling */
      input[type="hidden"] {
        display: none;
      }

      /* Address field specific styling */
      .address-field {
        @apply relative;

        .required {
          @apply text-red-500 ml-1;
        }
      }

      /* Validation styling */
      .validate-required {
        .input-text:invalid {
          @apply border-red-500 focus:border-red-500 focus:ring-red-500;
        }
      }
    }
  }

  /* Handle WooCommerce shipping calculator when it appears */
  .cart-shipping .woocommerce-shipping-calculator,
  .shipping-section .woocommerce-shipping-calculator {
    @apply mt-4;
  }

  /* Fallback CSS for shipping calculator - outside nested structure */
  .woocommerce-shipping-calculator .shipping-calculator-form.open,
  .woocommerce-shipping-calculator #shipping-calculator-form.open,
  section.shipping-calculator-form.open,
  section#shipping-calculator-form.open {
    display: block !important;
    margin-top: 1rem;
    padding: 1.5rem;
    background-color: white;
    border-radius: 0.5rem;
    border: 1px solid #d1d5db;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  }

  /* Force input styling */
  .woocommerce-shipping-calculator input[type="text"],
  .woocommerce-shipping-calculator input.input-text,
  .shipping-calculator-form input[type="text"],
  .shipping-calculator-form input.input-text,
  #shipping-calculator-form input[type="text"],
  #shipping-calculator-form input.input-text {
    width: 100% !important;
    padding: 0.5rem 0.75rem !important;
    border: 1px solid #d1d5db !important;
    border-radius: 0.375rem !important;
    font-size: 0.875rem !important;
    line-height: 1.25rem !important;
  }

  /* Force Select2 styling */
  .woocommerce-shipping-calculator .select2-container .select2-selection,
  .shipping-calculator-form .select2-container .select2-selection,
  #shipping-calculator-form .select2-container .select2-selection {
    border: 1px solid #d1d5db !important;
    border-radius: 0.375rem !important;
    height: 38px !important;
    line-height: 36px !important;
  }

  .woocommerce-shipping-calculator
    .select2-container
    .select2-selection__rendered,
  .shipping-calculator-form .select2-container .select2-selection__rendered,
  #shipping-calculator-form .select2-container .select2-selection__rendered {
    padding: 0.5rem 0.75rem !important;
    line-height: 34px !important;
    color: #111827 !important;
  }

  /* Force button styling */
  .woocommerce-shipping-calculator .button,
  .woocommerce-shipping-calculator button[type="submit"],
  .shipping-calculator-form .button,
  .shipping-calculator-form button[type="submit"],
  #shipping-calculator-form .button,
  #shipping-calculator-form button[type="submit"] {
    background-color: #fff200 !important;
    color: black !important;
    padding: 0.5rem 1.5rem !important;
    border-radius: 0.375rem !important;
    font-weight: 500 !important;
    border: none !important;
    cursor: pointer !important;
  }

  /* Force label styling */
  .woocommerce-shipping-calculator label,
  .shipping-calculator-form label,
  #shipping-calculator-form label {
    display: block !important;
    font-size: 0.875rem !important;
    font-weight: 500 !important;
    color: #374151 !important;
    margin-bottom: 0.5rem !important;
  }

  /* Additional spacing for shipping destination text */
  .woocommerce-shipping-destination {
    @apply text-sm text-gray-600 mt-4;
  }

  /* Responsive adjustments */
  @media (max-width: 768px) {
    .shipping-method-label {
      @apply grid-cols-1 gap-3;

      .col-span-1,
      .col-span-2,
      .col-span-3,
      .col-span-6 {
        @apply col-span-1;
      }

      /* Radio button row */
      .col-span-1:first-child {
        @apply flex items-center gap-3;

        .radio-button {
          @apply flex-shrink-0;
        }

        + .col-span-3 .method-name {
          @apply inline;
        }
      }

      /* Location info gets full width */
      .method-location {
        @apply text-base font-medium text-gray-700;
      }

      /* Price gets full width and larger */
      .method-price {
        @apply text-lg font-semibold;
      }
    }
  }
}

/* Checkout Page Styling */
.woocommerce-checkout {
  /* Checkout Form Sections */
  /* .billing-section,
  .additional-info-section {
    @apply bg-white rounded-lg p-6 shadow-sm border border-gray-200;
  } */

  .billing-section h2,
  .shipping-section h2,
  .additional-info-section h3 {
    @apply text-2xl font-semibold text-gray-900 mb-6;
  }

  /* Form Fields */
  .form-row {
    @apply mb-4;

    label {
      @apply block text-sm font-medium text-gray-700 mb-1;
    }

    input,
    select,
    textarea {
      @apply w-full px-3 py-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors;
    }

    input:required:invalid {
      @apply border-red-500 focus:border-red-500 focus:ring-red-500;
    }
  }

  /* Order Summary */
  .order-summary {
    @apply bg-gray-50 rounded-lg p-6 sticky top-4;

    h3 {
      @apply text-xl font-semibold text-gray-900 mb-6;
    }

    .order-item {
      @apply flex justify-between items-center py-3 border-b border-gray-200;

      &:last-child {
        @apply border-b-0;
      }

      .item-details {
        @apply flex-1;

        h4 {
          @apply font-medium text-gray-900;
        }

        .quantity {
          @apply text-sm text-gray-600;
        }
      }

      .item-price {
        @apply font-semibold text-gray-900;
      }
    }

    .total-row {
      @apply flex justify-between items-center py-3 border-b border-gray-200;

      &.final-total {
        @apply text-lg font-semibold border-b-0 pt-4;
      }
    }
  }

  /* Shipping Methods in Order Summary */
  .shipping-section {
    .shipping_method:checked ~ .shipping-method-label .radio-button {
      @apply border-black;
    }

    .shipping_method:checked ~ .shipping-method-label .radio-inner {
      @apply scale-100;
    }
  }

  /* Payment Methods */
  .payment-methods-section {
    .payment-method-option {
      @apply mb-3;

      .payment-method-label {
        @apply flex items-center p-4 border border-gray-200 rounded-lg cursor-pointer transition-colors;

        &:hover {
          @apply border-gray-300;
        }
      }

      .payment_method:checked + .payment-method-label {
        @apply border-black bg-gray-50;

        .radio-button {
          @apply border-black;
        }

        .radio-inner {
          @apply scale-100;
        }
      }

      .payment-box {
        @apply mt-3 p-4 bg-gray-50 rounded-lg border border-gray-200;

        .card-fields {
          .form-row {
            @apply mb-4;
          }

          .accepted-cards {
            @apply mt-4;

            .card-icons {
              @apply flex gap-2 mt-2;

              span {
                @apply inline-block w-10 h-6 bg-gray-200 rounded text-xs text-center leading-6 font-medium;
              }
            }
          }
        }
      }
    }
  }

  /* Coupon Section */
  .coupon-section {
    @apply py-4 border-b border-gray-200;

    .flex {
      @apply gap-2;

      input {
        @apply flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500;
      }

      button {
        @apply bg-[#FFF200] hover:bg-yellow-500 text-black px-4 py-2 rounded font-medium transition-colors;
      }
    }
  }

  /* Terms and Conditions */
  .terms-section {
    @apply mb-4;

    .flex {
      @apply items-start;

      input[type="checkbox"] {
        @apply w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 mt-1;
      }

      label {
        @apply ml-2 text-sm text-gray-600;
      }
    }

    p {
      @apply text-xs text-gray-500 mt-2;
    }
  }

  /* Place Order Button */
  .place-order-section {
    button {
      @apply w-full bg-[#FFF200] hover:bg-yellow-500 text-black py-4 px-6 rounded-lg font-semibold text-lg transition-colors;

      &:disabled {
        @apply opacity-75 cursor-not-allowed;
      }
    }
  }

  /* Loading States */
  .processing {
    .order-summary {
      @apply opacity-60 pointer-events-none;
    }
  }

  /* Mobile Responsive */
  @media (max-width: 768px) {
    .billing-section,
    .shipping-section,
    .additional-info-section {
      @apply p-4;
    }

    /* .order-summary {
      @apply sticky-none;
    } */

    .billing-fields,
    .shipping-address-fields {
      @apply grid-cols-1 gap-4;
    }

    .order-item {
      @apply flex-col items-start gap-2;

      .item-details {
        @apply w-full;
      }

      .item-price {
        @apply self-end;
      }
    }
  }
}

/* Order Pay Page - NAB Transact Styling */
.woocommerce-order-pay {
  /* Style the NAB Confirm and Pay button */
  input[type="submit"],
  button[type="submit"] {
    display: inline-block !important;
    padding: 1rem 1.5rem !important;
    background-color: #FFF200 !important;
    color: #000 !important;
    text-transform: uppercase;
    border-radius: 0.5rem !important;
    font-weight: 500 !important;
    border: none !important;
    cursor: pointer !important;
    transition: background-color 0.2s !important;
    font-family: Lexend;

    &:hover {
      background-color: #FFF200 !important;
    }
  }

  /* Fix NAB error message icon spacing */
  .woocommerce-error {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;

    &::before {
      left: 96%;
      display: inline-block;
    }
  }
}
